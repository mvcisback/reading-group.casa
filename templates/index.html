{% extends "base.html" %}

{% block content %}
  <section class="text-center space-y-1">
    <p class="text-xs uppercase tracking-[0.5em] text-slate-500">Schedule</p>
    <h2 class="text-3xl font-semibold text-white">Upcoming reads</h2>
  </section>
  <section class="mt-6 grid gap-6 lg:grid-cols-[2fr_1fr]">
    <article
      id="papers-panel"
      class="rounded-3xl border border-slate-800 bg-slate-950 p-6 shadow-2xl"
      hx-target="this"
      hx-swap="innerHTML"
    >
      {% include "partials/refresh.html" %}
    </article>
    <section class="rounded-3xl border border-slate-800 bg-slate-900 p-6 shadow-2xl">
      <header class="mb-4">
        <p class="text-xs uppercase tracking-[0.6em] text-slate-500">Nominate</p>
        <h2 class="text-lg font-semibold text-white">Register a paper</h2>
      </header>
      <form action="/papers" method="post" hx-post="/papers" hx-target="#papers-panel" hx-swap="innerHTML" class="flex flex-col gap-4">
        <label class="text-sm text-slate-300">
          <span class="mb-1 block font-semibold text-white">Title</span>
          <input
            name="title"
            required
            class="w-full rounded-2xl border border-slate-800 bg-slate-950 px-4 py-2 text-sm text-white placeholder:text-slate-500 focus:border-sky-500 focus:outline-none"
            placeholder="Enter the paper title"
          />
        </label>
        <label class="text-sm text-slate-300">
          <span class="mb-1 block font-semibold text-white">Reference link</span>
          <input
            name="paper_url"
            type="url"
            class="w-full rounded-2xl border border-slate-800 bg-slate-950 px-4 py-2 text-sm text-white placeholder:text-slate-500 focus:border-sky-500 focus:outline-none"
            placeholder="https://"
          />
        </label>
        <button
          type="submit"
          class="w-full rounded-2xl bg-sky-500 px-4 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-slate-950 transition hover:bg-sky-400"
        >
          Add paper
        </button>
      </form>
      {% if user %}
        <div class="mt-5 rounded-2xl border border-slate-800 bg-slate-950 p-4 text-sm text-slate-300">
          <p>
            Signed in as <span class="font-semibold text-white">{{ user.username }}</span>
          </p>
          <form method="post" action="/users/logout" class="mt-3">
            <button
              type="submit"
              class="w-full rounded-2xl bg-slate-700 px-4 py-2 text-sm font-semibold uppercase tracking-[0.3em] text-slate-200 transition hover:bg-slate-600"
            >
              Log out
            </button>
          </form>
        </div>
      {% else %}
        <a data-view-transition href="/login" class="mt-4 inline-flex items-center justify-center rounded-2xl border border-slate-700 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-200 transition hover:border-slate-500">Sign in or create an account</a>
      {% endif %}
      <p class="mt-4 text-xs text-slate-500">
        Voting on the <a data-view-transition href="/vote" class="text-slate-200 underline">vote page</a>.
      </p>
    </section>
  </section>
{% endblock %}
